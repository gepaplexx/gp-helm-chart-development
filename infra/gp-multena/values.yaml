proxy:
  log:
    level: 1 # 0 - debug, 1 - info, 2 - warn, 3 - error, -1 trace (exposes sensitive data)
  admin:
    bypass: false # enable admin bypass
    group: gepardec-run-admins # group name for admin bypass
  thanos:
    url: https://thanos-querier.openshift-monitoring.svc.cluster.local:9091
    tenantLabel: namespace
  loki:
    url: https://loki-query-frontend-http.openshift-logging.svc.cluster.local:3100
    tenantLabel: kubernetes_namespace_name
  db:
    enabled: false
    user: multitenant
    passwordPath: "/etc/secrets/db/password"
    host: localhost
    port: 3306
    dbName: example
    query: "SELECT * FROM users WHERE username = ?"
    tokenKey: "" # field in the jwt to use in the sql query
    existingSecret: "" # name of the existing secret with the password
  web:
    labelStoreKind: configmap
    oauthGroupName: "groups"
    jwksCertUrl: https://sso.play.run.gepardec.com/realms/internal/protocol/openid-connect/certs
    tlsVerifySkip: false

image:
  repository: ghcr.io/gepaplexx/multena-proxy
  pullPolicy: IfNotPresent
  tag: "feature-gpx-698-rewrite-v0.6.0"

collector:
  enabled: true
  logLevel: 1
  healthPort: 8080
  image:
    name: ghcr.io/gepaplexx/multena-rbac-collector
    tag: 0.1.5
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: 40Mi
      cpu: 5m
    limits:
      memory: 75Mi
createGrafanaOperatorDatasources: true

replicas: 1

service:
  webPort: 8080
  metricsPort: 8081

tls:
  loki:
    enabled: true
    secretName: loki-query-frontend-http
    cert: tls.crt
    key: tls.key
  thanos:
    enabled: false
    secretName: thanos-querier-tls
    cert: tls.crt
    key: tls.key
  copy:
    loki:
      enabled: true
      secretNamespace: openshift-logging
    thanos:
      enabled: false
      secretNamespace: openshift-monitoring

probes:
  readinessProbe:
    enabled: true
    initialDelaySeconds: 1
    periodSeconds: 5
    timeoutSeconds: 10
  livenessProbe:
    enabled: true
    initialDelaySeconds: 1
    periodSeconds: 10
    timeoutSeconds: 10

serviceAccount:
  create: true

resources:
  requests:
    cpu: 10m
    memory: 20M


