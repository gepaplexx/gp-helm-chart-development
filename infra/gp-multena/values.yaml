GrafanaOperatorDatasources: true

tls:
  loki:
    enabled: true
    secretName: loki-query-frontend-http
    cert: tls.crt
    key: tls.key
  thanos:
    enabled: false
    secretName: thanos-querier-tls
    cert: tls.crt
    key: tls.key
  copy:
    loki:
      enabled: true
      secretNamespace: openshift-logging
    thanos:
      enabled: false
      secretNamespace: openshift-monitoring

multena:
  log:
    level: 1
    logTokens: false
  admin:
    bypass: false
    group: gepardec-run-admins
  thanos:
    url: https://thanos-querier.openshift-monitoring.svc.cluster.local:9091
    tenantLabel: namespace
  loki:
    url: https://loki-query-frontend-http.openshift-logging.svc.cluster.local:3100
    tenantLabel: kubernetes_namespace_name
  db:
    enabled: false
    user: multitenant
    passwordPath: "/etc/secrets/db/password"
    host: localhost
    port: 3306
    dbName: example
    query: "SELECT * FROM users WHERE username = ?"
    tokenKey: "" # Add a value for tokenKey if needed
    existingSecret: ""
  web:
    labelStoreKind: configmap
    keycloakTokenGroupName: ""
    serviceAccountToken: ""
    jwksCertUrl: https://sso.keycloak-namespace.svc.cluster.local:8443/realms/internal/protocol/openid-connect/certs
    insecureSkipVerify: false
  dev:
    enabled: false
    username: "" # Add your default value or leave it for manual input

service:
  webPort: 8080
  metricsPort: 8081

replicas: 1

image:
  repository: ghcr.io/gepaplexx/multena-proxy
  pullPolicy: Always
  tag: "0.5.1"

probes:
  readinessProbe:
    enabled: true
    initialDelaySeconds: 1
    periodSeconds: 5
    timeoutSeconds: 10
  livenessProbe:
    enabled: true
    initialDelaySeconds: 1
    periodSeconds: 10
    timeoutSeconds: 10

serviceAccount:
  create: true
  name: ""

resources:
  requests:
    cpu: 10m
    memory: 20M

collector:
  enabled: true
  logLevel: 1
  healthPort: 8080
  cmName: gp-multena-labels
  cmNamespace: gp-grafana
  image:
    name: ghcr.io/gepaplexx/multena-rbac-collector
    tag: 0.1.5
    pullPolicy: Always
  resources:
    requests:
      memory: 40Mi
      cpu: 5m
    limits:
      memory: 75Mi
