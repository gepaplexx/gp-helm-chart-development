{{- if .Values.GrafanaOperatorDatasources }}
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: multena-metrics-datasource
  namespace: {{ .Release.Namespace }}
spec:
  instanceSelector:
    matchLabels:
      monitoring.gepardec.com/system: "true"
  datasource:
      name: metrics-multena (Thanos)
      uid: metrics-multena
      type: prometheus
      url: "http://{{ include "gp-multena.name" . }}:{{ .Values.service.port }}"
      access: proxy
      editable: true
      isDefault: false
      jsonData:
        httpMethod: POST
        oauthPassThru: true
        manageAlerts: false
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: multena-application-logs-datasource
  namespace: {{ .Release.Namespace }}
spec:
  instanceSelector:
    matchLabels:
      monitoring.gepardec.com/system: "true"
  datasource:
      name: logs-multena (Loki-Application)
      uid: logs-multena
      type: loki
      url: "http://{{ include "gp-multena.name" . }}:{{ .Values.service.port }}"
      access: proxy
      editable: true
      isDefault: false
      jsonData:
        httpMethod: POST
        oauthPassThru: true
        manageAlerts: false
{{- end }}