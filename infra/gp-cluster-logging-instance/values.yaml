infranodes:
  enabled: true
clusterlogging:
  managementState: "Managed"
lokistack:
  # Aktiviert die Ruler Komponente um aufgrund von Logfiles Alerts abschicken zu k√∂nnen.
  rules:
    enabled: true
  minio:
    enabled: false
  configuration:
    storageClassName: rook-ceph-fs
    limits:
      ingestion:
        # not entirely clear what does values do, but apparently they fix the ingestionRateLimit error inside of the log
        # collectors
        ingestionRate: 200
        ingestionBurstSize: 150
      queries:
        maxChunksPerQuery: 4000000
        maxQueriesSeries: 1000
    size: 1x.small  # Valid values are: 1x.extra-small, 1x.small, 1x.medium
    compactor:
      replicas: 1
    distributor:
      replicas: 1
    gateway:
      replicas: 1
    indexGateway:
      replicas: 1
    ingester:
      replicas: 1
    querier:
      replicas: 2
    queryFrontend:
      replicas: 1
    ruler:
      replicas: 1
  backend:
    bucketname: loki
    accesskey: loki
    secretkey: "lokilokiloki"
    endpoint: "http://loki-backend-storage-different.openshift-logging.svc.cluster.local:9000/"

# bitnami minio chart
minio:
  podSecurityContext:
    enabled: true
    fsGroup: 1000700000
  containerSecurityContext:
    enabled: true
    runAsUser: 1000700000
    runAsNonRoot: true
  fullnameOverride: loki-backend-storage-different
  replicas: 1
  persistence:
    size: 300Gi
    existingClaim: "loki-backend-storage"
  resources:
    requests:
      memory: 2Gi #default 4Gi bei 500Gi persistent storage. Sollte mit weniger auch auskommen.
    limits:
      memory: 4Gi
  makeBucketJob:
    securityContext:
      enabled: true
      runAsUser: 0
  serviceAccount:
    create: false
    automountServiceAccountToken: true
    name: loki-minio
  provisioning:
    users:
      - username: loki
        password: lokilokiloki
        policies:
          - readwrite
    podSecurityContext:
      enabled: true
      fsGroup: 1000700000
    containerSecurityContext:
      enabled: true
      runAsUser: 1000700000
      runAsNonRoot: true
    enabled: true
    buckets:
       - name: loki
         versioning: false
         # Versioning is automatically enabled if withLock is true
         # ref: https://docs.min.io/docs/minio-bucket-versioning-guide.html
         withLock: false
         # Only when mode is 'distributed'
         # ref: https://docs.minio.io/docs/distributed-minio-quickstart-guide
         lifecycle:
           - id: Loki7dRetention
             prefix: Loki
             disabled: false
             expiry:
               days: 30
               # Days !OR! date
               # date: "2021-11-11T00:00:00Z"
               nonconcurrentDays: 3
         # Only when mode is 'distributed'
         # ref: https://docs.minio.io/docs/distributed-minio-quickstart-guide



