{{ if .Values.dev }}
apiVersion: integreatly.org/v1alpha1
kind: GrafanaDataSource
metadata:
  name: {{ include "gp-multena-instance.name" . }}-proxy-datasource
  namespace: {{ .Release.Namespace }}
spec:
  name: system-datasources.yaml
  datasources:
    - name: multena-proxy
      uid: multena-proxy
      type: thanos
      url: "http://{{ include "gp-multena-instance.name" . }}-proxy:{{ .Values.proxyService.port }}"
      access: proxy
      editable: false
      isDefault: true
      jsonData:
        httpMethod: POST
        httpHeaderName1: Accept-Encoding
        oauthPassThru: true
      secureJsonData:
        httpHeaderValue1: "*/*"
{{ end }}




