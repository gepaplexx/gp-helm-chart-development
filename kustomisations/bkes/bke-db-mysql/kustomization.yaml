apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization


helmCharts:
- name: gp-bke-runtime-database-mysql
  includeCRDs: false
  valuesInline:
    db:
  releaseName: postgrestestapp
  version: 0.2.0
  repo: https://gepaplexx.github.io/gp-helm-charts/

transformers:
- change-mysql-password-key.yaml

# See GPX-281 or https://github.com/kubernetes-sigs/kustomize/issues/4303: Would use wrong namespace
patches:
- target:
    labelSelector: app.kubernetes.io/name=db
  patch: |-
    - op: remove
      path: /metadata/namespace
- target:
    name: postgrestestapp-db-connect
  patch: |-
    - op: remove
      path: /metadata/namespace

